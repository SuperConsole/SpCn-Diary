{"componentChunkName":"component---src-templates-blog-post-js","path":"/190801/","webpackCompilationHash":"3d5b1e172e15cb52ae3e","result":{"data":{"site":{"siteMetadata":{"title":"SpCn-Blog","author":"SuperConsole"}},"markdownRemark":{"id":"73bb2b1f-7478-5569-a738-b092fdffe3ef","excerpt":"WhonixはTailsLinuxと同様にOS内の全通信を「Tor経由」で行うことでセキュアな通信を実現するOSです。TailsLinuxと異なる利点としては「Whonix Gateway」と呼ばれる中継機能を容易に構築できる点です。このWhonix Gateway…","html":"<p>　WhonixはTailsLinuxと同様にOS内の全通信を「Tor経由」で行うことでセキュアな通信を実現するOSです。TailsLinuxと異なる利点としては「Whonix Gateway」と呼ばれる中継機能を容易に構築できる点です。このWhonix Gatewayを構築し、任意の仮想マシンのデフォルトゲートウェイに設定することで全通信がTor経由になります。Torの問題点であるDNS漏れについてもTor以外の通信をWhonixが遮断することにより解消されている(これはTailsLinuxも同様)のも大きな利点になっています。  </p>\n<p>構築フロー:</p>\n<ol>\n<li>公式サイト(<a href=\"https://www.whonix.org/download/\">https://www.whonix.org/download/</a>)からOVA(Open Virtualization Format)形式のファイルをダウンロード<br>\n<code class=\"language-text\">＊GUI版とCLI版があるが好みに合わせてダウンロードすると良い</code>  </li>\n<li>Virtual Box(以下、Vbox)にインポートする(特に設定は弄らずにインポートしても問題はない)  </li>\n<li>起動し、初期設定を行ったのちに以下コマンドを入力し、アップデートの有無を調べる<br>\n<code class=\"language-text\">$sudo apt-get update &amp;&amp; sudo apt-get upgrade</code>  </li>\n<li>コマンドの実行後、再起動する<br>\n<code class=\"language-text\">＊rootのパスワードを変えることを推奨</code></li>\n<li>Vboxの一覧画面で、IP匿名化を行いたい仮想マシン(例としてKaliLinuxを挙げる)を選択<br>\n<code class=\"language-text\">-&gt; ネットワークのアダプタ1を内部ネットワークにし、Whonixを選択する</code>  </li>\n<li>KaliLinuxを起動、OS内(ないし、検証のみであればFirefox ESRでも良い)で、<br>\n<code class=\"language-text\">-&gt; サブネットマスク: 255.255.192.0</code><br>\n<code class=\"language-text\">-&gt; ゲートウェイ: 10.152.152.10</code><br>\n<code class=\"language-text\">-&gt; DNSサーバー: 10.152.152.10</code><br>\nに設定、ネットワークインターフェースまたはOSを再起動して設定を適用する  </li>\n<li>TorによるIP匿名化ができているか以下のサイトを用いるなどして検証する<br>\n・ Check Tor Project <a href=\"https://check.torproject.org/\">https://check.torproject.org/</a><br>\n・ TorによりIPの匿名化が成功していれば「Congratulations.」から始まる文が表示される。  </li>\n</ol>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/736bc8a0e42502445da1a8821dae5bb7/0730f/tor-success-result.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.18818040435459%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuq0gWGi//xAAbEAACAQUAAAAAAAAAAAAAAAAAAQIDEBESIf/aAAgBAQABBQLZEZGRlXlv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAEBEAASIx/9oACAEBAAY/AuzSNIf/xAAdEAEAAgEFAQAAAAAAAAAAAAABABFBECExUWFx/9oACAEBAAE/IfFNhsG8OJTuEeSJV1fNP//aAAwDAQACAAMAAAAQj8//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPxCn/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EIV//8QAGRABAQEBAQEAAAAAAAAAAAAAAREAITFx/9oACAEBAAE/EEMJagTodcwpQOQIP3WQsbUuPN//2Q==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"tor success result\" title=\"tor success result\" src=\"/static/736bc8a0e42502445da1a8821dae5bb7/c739e/tor-success-result.jpg\" srcset=\"/static/736bc8a0e42502445da1a8821dae5bb7/8ee9c/tor-success-result.jpg 148w,\n/static/736bc8a0e42502445da1a8821dae5bb7/ebbe7/tor-success-result.jpg 295w,\n/static/736bc8a0e42502445da1a8821dae5bb7/c739e/tor-success-result.jpg 590w,\n/static/736bc8a0e42502445da1a8821dae5bb7/0730f/tor-success-result.jpg 643w\" sizes=\"(max-width: 590px) 100vw, 590px\" loading=\"lazy\">\n  </a>\n    </span>  \n<p>今までOS内の全通信をTor経由にする場合、TailsLinuxを使用することで可能にしていた。もちろんKaliLinux内にTorをインストールすればIPアドレスの匿名化も可能ではあるがその場合前述の通りDNS漏れが生じる場合がある。<br>\nこれはTorの実態であるSocks5プロキシがUDPに対応していないのが原因であるが、TailsLinuxを用いた場合、こういった非対応のトラフィックを全て遮断し、TCPのみの通信に強制することで解消される。<br>\nしかし、KaliLinux内には豊富なエクスプロイトツールがはじめから入っており、これを活用しようと考えた場合、WhonixをTorゲートウェイとした内部ネットワークを構築することで利点を両立させているのだ。すごい。すごいWhonix。おわり。</p>\n<p>参考:<br>\n・ Whonixを使ってみる。 <a href=\"http://ebimanion.hateblo.jp/entry/2018/02/22/111100\">http://ebimanion.hateblo.jp/entry/2018/02/22/111100</a><br>\n・ Whonixで仮想マシンをTorで匿名化 <a href=\"https://blog.cheena.net/8\">https://blog.cheena.net/8</a><br>\n・ Check Tor Project <a href=\"https://check.torproject.org/\">https://check.torproject.org/</a>  </p>","frontmatter":{"title":"WhonixによるTorゲートウェイの構築及び仮想マシンにおけるIPアドレス匿名化の検証","date":"August 01, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/190801/","previous":{"fields":{"slug":"/190724/"},"frontmatter":{"title":"Burp Suiteで構築するHTTPSプロキシ"}},"next":null}}}